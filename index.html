<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ–°å¹´å¿«ä¹</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;overflow:hidden;}
body{
  width:100vw;height:100vh;
  background:#05001a;
  display:flex;justify-content:center;align-items:center;
  font-family:"Microsoft Yahei",sans-serif;
  cursor:pointer;
}
.greeting{
  font-family:"Ma Shan Zheng",sans-serif;
  font-size:35px;
  font-weight:bold;
  color:#fff;
  position:absolute;
  top:30%;left:50%;
  transform:translateX(-50%);
  opacity:0;
  transition:opacity 3s linear;
  z-index:5;
}
canvas{
  position:absolute;
  top:0;left:0;
  width:100%;height:100%;
  z-index:1;
}
.audio-tip{
  position:absolute;
  bottom:20px;
  color:#fff;
  opacity:.7;
  font-size:14px;
  z-index:10;
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
</head>

<body>

<div class="greeting" id="greeting">ìƒˆí•´ ë³µ ë§ì´ ë°›ìœ¼ì„¸ìš”</div>
<div class="audio-tip" id="audioTip">ç‚¹å‡»å±å¹• ğŸ†</div>
<canvas id="canvas"></canvas>

<!-- æœ¬åœ°éŸ³é¢‘ -->
<audio id="sound2" src="2.mp3" preload="auto"></audio>
<audio id="sound3" src="3.mp3" preload="auto"></audio>

<script>
/* ===== Canvas ===== */
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = innerWidth;
canvas.height = innerHeight;
addEventListener('resize',()=>{
  canvas.width = innerWidth;
  canvas.height = innerHeight;
});

/* ===== æ–‡å­— ===== */
const greeting = document.getElementById('greeting');
setTimeout(()=>{
  greeting.style.opacity = 1;
  setTimeout(()=>greeting.style.opacity = 0,3000);
},3000);

/* ===== çƒŸèŠ±ç²’å­ ===== */
let particles=[];
class Particle{
  constructor(x,y,color){
    this.x=x;this.y=y;
    this.vx=(Math.random()-0.5)*7;
    this.vy=(Math.random()-0.5)*7;
    this.alpha=1;
    this.color=color;
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.vy+=0.05;
    this.alpha-=0.015;
    return this.alpha>0;
  }
  draw(){
    ctx.globalAlpha=this.alpha;
    ctx.fillStyle=this.color;
    ctx.fillRect(this.x,this.y,3,3);
    ctx.globalAlpha=1;
  }
}
function createFireworkAt(x,y){
  const colors=["#ff0043","#14fc56","#1e90ff","#ffd700","#ff69b4"];
  const color=colors[Math.floor(Math.random()*colors.length)];
  for(let i=0;i<80;i++){
    particles.push(new Particle(x,y,color));
  }
}
function animate(){
  ctx.fillStyle="rgba(5,0,26,.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  particles = particles.filter(p=>p.update());
  particles.forEach(p=>p.draw());
  requestAnimationFrame(animate);
}
animate();

/* ===== å£°éŸ³ï¼ˆæ¯æ¬¡ä»å¤´ï¼Œä¸è¿éŸ³ï¼‰ ===== */
const sound2 = document.getElementById('sound2');
const sound3 = document.getElementById('sound3');

function playFromStart(audioEl, volume){
  const a = audioEl.cloneNode();
  a.volume = volume;
  a.play().catch(()=>{});
  a.onended = () => a.remove();
}

/* ===== ç‚¹å‡»ï¼šçƒŸèŠ± + å£°éŸ³ ===== */
document.body.addEventListener('click', (e)=>{
  playFromStart(sound2,0.6);
  playFromStart(sound3,0.7);
  createFireworkAt(e.clientX, e.clientY);
  document.getElementById('audioTip').style.display='none';
});
</script>

</body>
</html>
